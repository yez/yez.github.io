<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  
    <meta name="description" content="A technology blog about a Year of Commits to Open Source projects.">
  

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      A Year of Commits
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="http://jakeyesbeck.com/public/css/share.css">
  <link rel="stylesheet" href="http://jakeyesbeck.com/public/css/poole.css">
  <link rel="stylesheet" href="http://jakeyesbeck.com/public/css/syntax.css">
  <link rel="stylesheet" href="http://jakeyesbeck.com/public/css/hyde.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://jakeyesbeck.com/public/apple-touch-icon-144-precomposed.png">
                                 <link rel="shortcut icon" href="http://jakeyesbeck.com/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
  <script src="//load.sumome.com/" data-sumo-site-id="c1ac0d77564d88e7bccc5e57a3839303fe48b17353cf42e4a295539de43b653b" async="async"></script>
</head>


  <body>

    <div class="sidebar">
  <div class="container">
    <div class="sidebar-about">
      <h2 class='h1'>
        <a href="http://jakeyesbeck.com">
          A Year of Commits
        </a>
      </h2>
      <p class="lead">Jake Yesbeck's blog consisting of technical solutions, opinions about life, and updates on "A Year of Commits".
</p>
    </div>

    <nav class="sidebar-nav">
      <a class="sidebar-nav-item" href="http://jakeyesbeck.com">Home</a>
      <a class="sidebar-nav-item" href="/archives">Archives</a>
      <a class="sidebar-nav-item" href="/about">About</a>
      <a class="sidebar-nav-item" href="https://github.com/yez">GitHub</a>
      <a class="sidebar-nav-item" href="https://twitter.com/jakeyesbeck">Twitter</a>
      <a class="sidebar-nav-item" href="/atom.xml">Feed</a>
    </nav>

    <p class='copyright'>&copy; Jake Yesbeck 2016. All rights reserved.</p>
  </div>
</div>


    <div class="content container">
      <div class="posts">
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2015/08/16/gems-are-not-magic/">
        Gems != Magic
      </a>
    </h1>

    

    <span class="post-date">16 Aug 2015</span>
    <span class='share-container'><ul class="share-buttons">
  <li>
    <a href="https://www.facebook.com/sharer/sharer.php?u=http://jakeyesbeck.com/2015/08/16/gems-are-not-magic/&t=Gems != Magic" title="Share on Facebook" target="_blank">
      <img src="http://jakeyesbeck.com/assets/images/facebook.svg">
    </a>
  </li>
  <li>
    <a href="https://twitter.com/intent/tweet?source=http%3A%2F%2Fjakeyesbeck.com&text=Gems != Magic%20http://jakeyesbeck.com/2015/08/16/gems-are-not-magic/&via=jakeyesbeck" target="_blank" title="Tweet">
      <img src="http://jakeyesbeck.com/assets/images/twitter.svg">
    </a>
  </li>
  <li>
    <a href="https://plus.google.com/share?url=http://jakeyesbeck.com/2015/08/16/gems-are-not-magic/" target="_blank" title="Share on Google+">
      <img src="http://jakeyesbeck.com/assets/images/google_plus.svg">
    </a>
  </li>

  <li>
    <a href="https://news.ycombinator.com/submitlink?u=http://jakeyesbeck.com/2015/08/16/gems-are-not-magic/&t=Gems != Magic" target="_blank" title="Share on Hacker News">
      <img src="http://jakeyesbeck.com/assets/images/ycomb.svg">
    </a>
  </li>

  <li>
    <a href="https://getpocket.com/save?url=http://jakeyesbeck.com/2015/08/16/gems-are-not-magic/&title=Gems != Magic" target="_blank" title="Add to Pocket">
      <img src="http://jakeyesbeck.com/assets/images/pocket.svg">
    </a>
  </li>
  <li>
    <a href="http://www.reddit.com/submit?url=http://jakeyesbeck.com/2015/08/16/gems-are-not-magic/&title=Gems != Magic" target="_blank" title="Submit to Reddit">
      <img src="http://jakeyesbeck.com/assets/images/reddit.svg">
    </a>
  </li>
</ul>
</span>

    <p>Ruby gems can seem magical. Usually, one (or more accurately: thirty) solution to a problem exists in the form of a gem. Using gems is easy and intuitive. Simply add a line in the project root’s <code class="highlighter-rouge">Gemfile</code> and run <code class="highlighter-rouge">bundle install</code>. Then, either <code class="highlighter-rouge">require</code> the name of the gem or, if using Ruby on Rails, start using the gem’s code immediately anywhere in the project. What could possibly go wrong?</p>

<h2 id="gems-on-gems-on-gems">Gems on gems on gems</h2>

<p>Unchecked and unmanaged, a project’s <code class="highlighter-rouge">Gemfile</code> might turn into something that looks like:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">source</span> <span class="s1">'http://rubygems.org'</span>

<span class="n">gem</span> <span class="s1">'linkbuilder'</span>
<span class="n">gem</span> <span class="s1">'http_helper'</span>
<span class="n">gem</span> <span class="s1">'the-color-red'</span>
<span class="n">gem</span> <span class="s1">'devise'</span>
<span class="n">gem</span> <span class="s1">'cancancancancan'</span>
<span class="n">gem</span> <span class="s1">'nokogiri'</span>
<span class="n">gem</span> <span class="s1">'crack'</span>
<span class="c1"># ...</span>
<span class="c1"># ....</span>
<span class="c1"># .....</span>
<span class="n">gem</span> <span class="s1">'cucumber'</span>
<span class="n">gem</span> <span class="s1">'avacado'</span>
<span class="n">gem</span> <span class="s1">'you-get-the-idea'</span>
<span class="n">gem</span> <span class="s1">'these-are-too-many-gems'</span>
<span class="n">gem</span> <span class="s1">'really'</span>
</code></pre>
</div>

<p>It is very possible that all these gems do not have any adverse side effects. They might not even have any horrible monkey patches to <code class="highlighter-rouge">String</code> or <code class="highlighter-rouge">Object</code>. <a href="http://www.nateberkopec.com/2015/07/22/secrets-to-speedy-ruby-apps-on-heroku.html">This post</a> has more information on <em>“Why do most Rails apps use so much memory per process?”</em>.</p>

<p>Without being able to see inside of them, intrusive gems might be mixed into this mass and we would have no idea. At a glance, it is not immediately obvious how to differentiate between benign and malignant gems. It becomes infinitely easier to understand how gems interact if we remember that gems are not magic.</p>

<h2 id="gems-are-just-libraries">Gems are just Libraries</h2>

<p>There it is! The rabbit is out of the hat. Somewhere, some amount of cats have been released from their respective bags. Gems are not magic silver bullets injected into a codebase. Instead <strong>they are nothing more than libraries of code</strong>. Gems are <em>(hopefully)</em> well encapsulated groups of files that amount to a <em>(again hopefully)</em> few pieces of helpful functionality. With this new understanding of what gems really are, it means that parsing, modifying, and creating gems is within reach. All that is left is to figure out how to pry them open.</p>

<h2 id="opening-gems">Opening gems</h2>

<p>Understanding gems is a great way to learn different design patterns and idiomatic Ruby conventions. Good gems have <a href="https://github.com/jnunemaker/httparty/blob/master/lib/httparty.rb#L29">in-line documentation</a>, great gems have <a href="https://github.com/apotonick/trailblazer#trailblazer">comprehensive Github documentation</a>. Github is the most common place to find the source code for gems and a large number of them have really great method and API documentation. This level of detail might be all that is required; however, for the more opaque gems, the <code class="highlighter-rouge">bundle open</code> command is extremely helpful.</p>

<p><code class="highlighter-rouge">bundle open &lt;gemname&gt;</code> will use the system default text editor to open the contents of a gem. Since all gems are installed locally on the system, they should be available to open from a project’s root. If a default editor is not set, or the default is not desired, one can be added to the beginning of the command: <code class="highlighter-rouge">EDITOR=vim bundle open &lt;gemname&gt;</code>.</p>

<p>A common starting place for a gem’s logic is in a file with the same name as the gem. Since most gems need to encapsulate their logic, a namespace or wrapper class is usually created with the same name as the gem. In this file it is equally common to find a list of required files or the entry point for the underlying logic. This file is usually in the root of the gem’s source or in a <code class="highlighter-rouge">lib</code> directory.</p>

<p>In the <a href="http://jakeyesbeck.com/2015/05/10/validates-type/">validates_type</a> root file:</p>

<p><img src="/assets/images/validates_type_dir_list.png" alt="validates_type dir list" /></p>

<h2 id="great-now-what">Great! Now what?</h2>

<p>Now, go out there and open up all the gems in the entire world! Read them, understand them, be one with the gems. Get a flavor for the different types of Ruby code that can exist. Then, after complete code nirvana has been achieved, submit a pull request to the gem’s source with some great additions. Or, place a few bindings in a few obscure methods to see how the code flows in and out of the gem. A master craftsman understands all of the tools in his toolbox, the same should be true for software.</p>

  </div>
  
</div>

<div class="pagination">
  
    <a class="pagination-item older" href="http://jakeyesbeck.com/page31">Older</a>
  
  
    
      <a class="pagination-item newer" href="http://jakeyesbeck.com/page29">Newer</a>
    
  
</div>

    </div>
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-62292380-1', 'auto');
  ga('require', 'linkid');
  ga('send', 'pageview');

  window.setTimeout(function() {
    ga('send', 'event', '10 seconds', 'passed')
  }, 30 * 1000);
</script>

  </body>
</html>
